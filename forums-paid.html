<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Forums - OLDRBX</title>
<link rel="icon" href="img/ic.png">
<style>
:root{
  --blue:#0074bd;
  --bg:#e9e9ea;
  --panel:#ffffff;
  --muted:#6d6d6d;
  --border:#d5d7d9;
}
html,body{height:100%;margin:0;background:var(--bg);font-family:Arial,Helvetica,sans-serif;color:#111}
a{text-decoration:none;color:inherit}

.topbar{
  height:56px;
  background:var(--blue);
  display:flex;
  align-items:center;
  gap:12px;
  padding:0 12px;
  box-sizing:border-box;
}
.hamburger{
  width:44px;height:44px;
  border-radius:6px;
  border:none;
  background:transparent;
  color:#fff;
  font-size:22px;
  display:flex;
  align-items:center;
  justify-content:center;
  cursor:pointer;
}
.logo-img{height:34px}
.top-right{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:12px;
  padding-right:6px
}
.money-wrap{
  display:flex;
  align-items:center;
  gap:8px;
  color:#fff;
  font-weight:800
}
.money-wrap img{width:22px;height:22px}
.balance{color:#fff;font-weight:800}
.avatar{
  width:36px;height:36px;
  border-radius:50%;
  overflow:hidden;
  background:#fff;
  display:block
}
.avatar img{width:100%;height:100%;object-fit:cover}

.page{
  max-width:980px;
  margin:28px auto;
  padding:0 16px;
  box-sizing:border-box
}
.container{
  display:grid;
  grid-template-columns:280px 1fr;
  gap:18px;
  align-items:start
}
.sidebar{
  background:var(--panel);
  border:1px solid var(--border);
  padding:12px;
  box-sizing:border-box
}
.nav-item{
  padding:12px;
  border-radius:6px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  font-weight:800;
  color:#111;
  cursor:pointer;
  background:#fff;
  border:1px solid var(--border);
  margin-bottom:10px
}
.main{
  background:transparent;
  padding:0;
  min-height:420px
}
.footer{
  margin-top:18px;
  background:var(--panel);
  border-top:1px solid var(--border);
  padding:12px 16px;
  color:var(--muted);
  font-weight:700
}
@media(max-width:960px){
  .container{grid-template-columns:1fr}
  .sidebar{display:none}
  .sidebar.open{
    display:block;
    position:fixed;
    left:0;
    top:56px;
    bottom:0;
    width:260px;
    z-index:1200;
    overflow:auto
  }
}
</style>
</head>
<body>

<div class="topbar">
  <button id="hamb" class="hamburger">&#9776;</button>
  <img src="img/logo.png" class="logo-img">
  <div class="top-right">
    <div class="money-wrap">
      <img src="img/money.png">
      <div class="balance" id="balanceText">0</div>
    </div>
    <a href="profile-paid.html" class="avatar">
      <img id="topAv" src="img/user.png">
    </a>
  </div>
</div>

<div class="page">
  <div class="container">
    <aside id="sidebar" class="sidebar">
      <div class="nav-item" onclick="location.href='home-paid.html'">Home</div>
      <div class="nav-item" onclick="location.href='forums-paid.html'">Forums</div>
      <div class="nav-item" onclick="location.href='profile-paid.html'">Profile</div>
    </aside>

    <main class="main">
      <div id="backBtn" class="back-btn" onclick="backToTopics()">← Back to topics</div>
      <div id="topicHeader" class="topic-header">Select a topic</div>

      <div id="topicsPanel" class="topics-panel">
        <div id="topicsList" class="topics-grid"></div>
      </div>

      <div class="posts" id="postsList">
        <div class="empty">Choose a topic to view messages</div>
      </div>

      <div id="composerWrap" style="margin-top:12px;display:none">
        <div style="font-size:13px;color:var(--muted);margin-bottom:6px">
          Post as <span id="meName"></span>
        </div>
        <div class="composer">
          <img id="meAv" src="img/user.png" style="width:52px;height:52px;border-radius:50%">
          <textarea id="msgInput" placeholder="Write your message..."></textarea>
        </div>
        <div style="margin-top:8px;display:flex;justify-content:flex-end">
          <button id="sendBtn">Send</button>
        </div>
      </div>
    </main>
  </div>

  <footer class="footer">© 2026 OLDRBX</footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
document.getElementById('hamb').onclick=function(){
  if(window.innerWidth<960){
    document.getElementById('sidebar').classList.toggle('open')
  }
}
let auth=null
try{auth=JSON.parse(localStorage.getItem('auth'))}catch(e){}
if(auth){
  document.getElementById('topAv').src=auth.avatarUrl||'img/user.png'
  document.getElementById('balanceText').innerText=auth.balance||0
}
</script>

</body>
</html>
